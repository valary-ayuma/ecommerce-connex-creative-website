<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart Connex Creative | B2B Design Solutions</title>
    <meta name="description" content="Your B2B partner, for premuim customized promotional merchandise from stationary to attire ."> 
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <script src="header.js"></script>
    <style>
        /* Add some basic styles if not in style.css */
        .cart-item { border-bottom: 1px solid #eee; padding: 15px 0; display: flex; justify-content: space-between; align-items: center; }
        .cart-item-details { flex-grow: 1; }
        .cart-item-price { font-weight: bold; }
        .cart-summary hr { margin: 15px 0; }
        .checkout-section { margin-top: 30px; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        #checkoutButton { background-color: var(--primary-color, #007bff); color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; width: 100%; margin-top: 15px; }
        #checkoutButton:disabled { background-color: #ccc; }
    </style>
</head>
<body>
    <header class="navbar">
        <div class="logo">
            <a href="index.html" class="logo">
                <img src="logo.png"alt="connex creative logo">
            </a>
        </div>
        <nav class="main-nav">
            <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="product.html">Products</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="contact.html">Contact Us</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li id="nav-auth"></li>
        </ul>
        </nav>
        <div class="utility-icons">
            <a href="signin.html" class="sign-in-link">
                <span class="icon-placeholder">üë§</span> Sign in
            </a>
            <a href="cart.html" class="cart-link">
                <span class="icon-placeholder cart-icon">üõí</span>
                <span class="cart-count">0</span>
            </a>
        </div>
    </header>
    <main>
        <main class="cart-container">
        <h1>Shopping Cart üõí</h1>
        
        <table class="cart-table" id="cartTable">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Details</th>
                    <th>Qty</th>
                    <th>Subtotal</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="cartItems">
                </tbody>
        </table>

        <div id="emptyCartMessage" class="empty-msg" style="display:none;">
            Your cart is empty. <a href="product.html">Go shopping!</a>
        </div>

        <div class="cart-summary">
            <strong>Grand Total: <span id="grandTotal">KES 0</span></strong>
        </div>

        <div style="margin-top: 40px; overflow: hidden;">
            <a href="product.html" style="color: var(--primary-color); text-decoration: none; font-weight: 600;">‚Üê Continue Shopping</a>
            <button onclick="proceedToCheckout()" class="btn-checkout" id="checkoutBtn">Proceed to Checkout</button>
        </div>
    </main>

    <script>
        function loadCart() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const container = document.getElementById('cartItems');
            const emptyMsg = document.getElementById('emptyCartMessage');
            const table = document.getElementById('cartTable');
            const checkoutBtn = document.getElementById('checkoutBtn');
            let grandTotal = 0;

            container.innerHTML = '';

            if (cart.length === 0) {
                table.style.display = 'none';
                checkoutBtn.style.display = 'none';
                emptyMsg.style.display = 'block';
                return;
            }

            cart.forEach((item, index) => {
                grandTotal += item.total;
                container.innerHTML += `
                    <tr>
                        <td><strong>${item.name}</strong></td>
                        <td>Color: ${item.color} ${item.hasLogo ? '<br><small>‚úÖ Logo Attached</small>' : ''}</td>
                        <td>${item.quantity}</td>
                        <td>KES ${item.total.toLocaleString()}</td>
                        <td><button class="remove-btn" onclick="removeItem(${index})">Remove</button></td>
                    </tr>
                `;
            });

            document.getElementById('grandTotal').innerText = `KES ${grandTotal.toLocaleString()}`;
        }

        function removeItem(index) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            loadCart(); // Refresh view
            updateCartCount(); // Function usually found in header.js
        }

        function proceedToCheckout() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            if (cart.length > 0) {
                // For simplicity, we checkout the first item in the cart.
                // In a multi-item system, you'd send the whole cart ID.
                const item = cart[0];
                window.location.href = `customize_order.html?product=${encodeURIComponent(item.name)}&qty=${item.quantity}&price=${item.price}&color=${item.color}`;
            }
        }

        document.addEventListener('DOMContentLoaded', loadCart);
    </script>
</body>
</html>